# å°ä¹ AI é¡¹ç›®è‡ªåŠ¨ç¯å¢ƒé…ç½®
# æ·»åŠ åˆ° ~/.zshrc: source ~/Dev/xiaole-ai/.zshrc_xiaole

# è‡ªåŠ¨åˆ‡æ¢ Node ç‰ˆæœ¬å‡½æ•°
autoload -U add-zsh-hook
load-nvmrc() {
if [[ -f .nvmrc && -r .nvmrc ]]; then
local node_version="$(cat .nvmrc)"
if [[ -n "$node_version" ]]; then
# æ£€æŸ¥å½“å‰ç‰ˆæœ¬æ˜¯å¦åŒ¹é…
local current_version="$(node --version 2>/dev/null)"
if [[ "$current_version" != "v$node_version" ]]; then
echo "ğŸ”„ åˆ‡æ¢åˆ° Node $node_version..."
nvm use "$node_version" 2>/dev/null || nvm install "$node_version"
fi
fi
fi
}

# è¿›å…¥ç›®å½•æ—¶è‡ªåŠ¨åŠ è½½ .nvmrc
add-zsh-hook chpwd load-nvmrc
load-nvmrc

# å°ä¹ AI å¿«æ·å‘½ä»¤
alias xiaole-start='cd ~/Dev/xiaole-ai && ./start.sh'
alias xiaole-stop='cd ~/Dev/xiaole-ai && ./stop.sh'
alias xiaole-restart='cd ~/Dev/xiaole-ai && ./stop.sh && sleep 2 && ./start.sh'
alias xiaole-frontend='cd ~/Dev/xiaole-ai/frontend && ./start.sh'
alias xiaole-backend='cd ~/Dev/xiaole-ai/backend && python main.py'
alias xiaole-log-frontend='tail -f ~/Dev/xiaole-ai/logs/frontend.log'
alias xiaole-log-backend='tail -f ~/Dev/xiaole-ai/logs/backend.log'
alias xiaole-logs='tail -f ~/Dev/xiaole-ai/logs/*.log'

echo "âœ… å°ä¹ AI ç¯å¢ƒé…ç½®å·²åŠ è½½"
echo "ğŸ’¡ å¿«æ·å‘½ä»¤: xiaole-start | xiaole-stop | xiaole-restart | xiaole-logs"
