# 语音交互功能测试指南

## 测试环境
- 浏览器：Chrome / Edge / Safari（推荐）
- URL：http://localhost:8000
- 日期：2025-11-12

---

## 测试步骤

### 1️⃣ 语音输入测试

**步骤：**
1. 打开 http://localhost:8000
2. 在对话页面，找到输入框旁边的 🎤 按钮
3. 点击 🎤 按钮
4. 浏览器会请求麦克风权限，点击"允许"
5. 看到底部出现粉色状态条"正在聆听..."和波形动画
6. 对着麦克风说话，例如："你好，今天天气怎么样？"
7. 说完后，识别结果会自动填入输入框

**预期结果：**
- ✅ 麦克风按钮有渐变色（粉红色）
- ✅ 点击后按钮有脉冲动画效果
- ✅ 底部显示语音状态提示条
- ✅ 状态条有5个波形动画
- ✅ 临时识别结果实时显示
- ✅ 最终结果自动填入输入框
- ✅ 识别准确度 > 85%

**测试语句：**
```
1. "你好，今天天气怎么样？"
2. "帮我记住今天要开会"
3. "明天提醒我买菜"
4. "搜索一下人工智能的最新发展"
5. "讲一个笑话"
```

### 2️⃣ 语音输出测试

**步骤：**
1. 进入"设置"页面
2. 找到"🎤 语音交互设置"部分
3. 打开"自动播放AI回复"开关
4. 调整语速（可选，默认1.0x）
5. 调整音量（可选，默认100%）
6. 返回对话页面
7. 发送一条消息："你好"
8. 等待AI回复
9. 听AI回复的语音播放

**预期结果：**
- ✅ AI回复后自动开始语音播放
- ✅ 语音清晰，发音准确
- ✅ 语速符合设置（0.5x - 2.0x）
- ✅ 音量符合设置（0% - 100%）
- ✅ 播放完成后自动停止

### 3️⃣ 语音设置测试

**测试项：**

| 设置项       | 操作                 | 预期结果                     |
| ------------ | -------------------- | ---------------------------- |
| 自动播放开关 | 开启/关闭            | 显示提示信息，设置生效       |
| 语速调节     | 拖动滑块 0.5x - 2.0x | 右侧显示当前值，下次播放生效 |
| 音量控制     | 拖动滑块 0% - 100%   | 右侧显示百分比，下次播放生效 |
| 设置持久化   | 刷新页面             | 设置保持不变                 |

### 4️⃣ 错误处理测试

**测试场景：**

1. **拒绝麦克风权限**
   - 操作：点击🎤，在权限请求中点击"拒绝"
   - 预期：显示"麦克风权限被拒绝"提示

2. **长时间无语音**
   - 操作：点击🎤后长时间不说话
   - 预期：显示"没有检测到语音"，自动停止

3. **不支持的浏览器**
   - 操作：在旧版浏览器中测试
   - 预期：显示友好提示，建议使用Chrome/Edge/Safari

4. **网络错误**
   - 操作：断网后发送消息
   - 预期：不播放语音，显示错误信息

### 5️⃣ UI动画测试

**检查项：**
- ✅ 麦克风按钮渐变色效果
- ✅ 录音时的pulse脉冲动画
- ✅ 状态提示条圆角和阴影
- ✅ 5个波形动画流畅度
- ✅ 按钮悬停效果（向上移动2px）
- ✅ 设置面板滑块样式

---

## 浏览器兼容性测试

| 浏览器  | 语音输入 | 语音输出 | 备注               |
| ------- | -------- | -------- | ------------------ |
| Chrome  | ✅        | ✅        | 完全支持，推荐     |
| Edge    | ✅        | ✅        | 完全支持，推荐     |
| Safari  | ✅        | ✅        | 完全支持           |
| Firefox | ⚠️        | ✅        | 需手动启用语音识别 |

---

## 已知问题

1. Firefox浏览器可能需要手动启用语音识别：
   - 地址栏输入：`about:config`
   - 搜索：`media.webspeech.recognition.enable`
   - 设置为：`true`

2. 某些浏览器可能需要HTTPS才能使用麦克风
   - 本地开发：localhost默认允许
   - 生产环境：需要HTTPS

---

## 性能指标

| 指标       | 目标值   | 实际值 |
| ---------- | -------- | ------ |
| 识别延迟   | < 1秒    | __ 秒  |
| 识别准确度 | > 85%    | ___ %  |
| 播放延迟   | < 0.5秒  | __ 秒  |
| 语音质量   | 清晰流畅 | _____  |

---

## 测试结论

**日期：** 2025-11-12
**测试人：** ________
**状态：** ⬜ 通过 ⬜ 未通过 ⬜ 需优化

**问题记录：**
```
1. 
2. 
3. 
```

**建议改进：**
```
1. 
2. 
3. 
```
