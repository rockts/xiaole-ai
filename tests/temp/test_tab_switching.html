<!DOCTYPE html>s
<html>

<head>
    <title>标签切换测试</title>
    <style>
        .tab-content {
            display: none;
            padding: 20px;
            border: 2px solid #ccc;
            margin: 10px;
        }

        .tab-content.active {
            display: block;
            background: #e0ffe0;
        }

        button {
            margin: 5px;
            padding: 10px;
        }

        .result {
            margin-top: 20px;
            padding: 10px;
            background: #f0f0f0;
        }
    </style>
</head>

<body>
    <h2>标签切换逻辑测试</h2>

    <button onclick="testSwitchTab('memory')">切换到记忆</button>
    <button onclick="testSwitchTab('tasks')">切换到任务</button>
    <button onclick="testSwitchTab('chat')">切换到聊天</button>
    <button onclick="testNewChat()">新对话</button>

    <div id="chat" class="tab-content active">
        <h3>聊天区域</h3>
        <p>这是聊天内容</p>
    </div>

    <div id="memory" class="tab-content">
        <h3>记忆页面</h3>
        <p>这是记忆功能</p>
    </div>

    <div id="tasks" class="tab-content">
        <h3>任务页面</h3>
        <p>这是任务功能</p>
    </div>

    <div class="result" id="result"></div>

    <script>
        function testSwitchTab(tabName) {
            console.log('切换到:', tabName);

            // 隐藏所有内容区域
            document.querySelectorAll('.tab-content').forEach((content) => {
                content.classList.remove('active');
            });

            // 显示目标内容
            const contentEl = document.getElementById(tabName);
            if (contentEl) {
                contentEl.classList.add('active');
            }

            updateResult(`已切换到 ${tabName}`);
        }

        function testNewChat() {
            console.log('新对话');

            // 隐藏所有内容区域
            document.querySelectorAll('.tab-content').forEach((content) => {
                content.classList.remove('active');
            });

            // 显示聊天区域
            const chatTab = document.getElementById('chat');
            if (chatTab) {
                chatTab.classList.add('active');
            }

            updateResult('已切换到聊天 (新对话)');
        }

        function updateResult(msg) {
            const result = document.getElementById('result');
            const activeElements = document.querySelectorAll('.tab-content.active');
            const activeIds = Array.from(activeElements).map(el => el.id).join(', ');
            result.innerHTML = `
                <strong>操作:</strong> ${msg}<br>
                <strong>当前激活:</strong> ${activeIds || '无'}<br>
                <strong>激活数量:</strong> ${activeElements.length}
            `;
        }

        // 初始状态
        updateResult('初始状态');
    </script>
</body>

</html>