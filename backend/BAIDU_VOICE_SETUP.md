# 百度语音识别快速配置指南

## 🎯 5分钟快速配置

### 第一步：注册百度智能云（2分钟）

1. 访问：https://cloud.baidu.com/
2. 点击右上角"注册"或"登录"
3. 使用手机号注册（需要实名认证）

### 第二步：创建语音应用（2分钟）

1. 登录后，进入"产品服务"
2. 找到"人工智能" → "语音技术"
3. 点击"领取免费资源"（每天有免费额度）
4. 创建应用：
   - 应用名称：xiaole-ai
   - 应用描述：AI语音助手
   - 应用归属：个人
   - 接口选择：语音识别（勾选）

5. 创建完成后，会得到三个密钥：
   ```
   APP ID: 12345678
   API Key: abcdefghijk123456
   Secret Key: xyz789xyz789xyz789
   ```

### 第三步：配置项目（1分钟）

1. 复制配置文件模板：
   ```bash
   cp .env.baidu.example .env
   ```

2. 编辑 `.env` 文件，填入你的密钥：
   ```bash
   BAIDU_APP_ID=12345678
   BAIDU_API_KEY=abcdefghijk123456
   BAIDU_SECRET_KEY=xyz789xyz789xyz789
   ```

3. 重启后端服务：
   ```bash
   # 停止旧服务
   pkill -f "python.*main.py"
   
   # 启动新服务
   source .venv/bin/activate
   python3 main.py &
   ```

### 第四步：测试语音识别（1分钟）

1. 刷新浏览器页面：http://localhost:8000
2. 进入"设置"页面
3. 找到"语音交互设置"
4. 将"语音识别服务"切换为"百度语音 (推荐)"
5. 回到对话页面
6. 点击 🎤 按钮
7. 说话测试："你好，今天天气怎么样？"

## ✅ 验证是否配置成功

### 方法1：检查后端日志
```bash
# 启动后端时应该看到
✅ 百度语音服务初始化成功
```

如果看到：
```bash
⚠️ 百度语音服务未配置
```
说明环境变量没有正确设置。

### 方法2：测试API接口
```bash
curl http://localhost:8000/api/voice/status
```

应该返回：
```json
{
  "enabled": true,
  "service": "百度语音识别",
  "provider": "Baidu AI"
}
```

## 🆓 免费额度说明

百度语音识别免费额度：
- **每天免费调用次数：** 5万次
- **QPS限制：** 10次/秒
- **足够个人使用**

如果需要更多：
- 可以购买商用版
- 或注册多个账号

## 🐛 常见问题

### Q1: 提示"百度语音服务未配置"

**解决方案：**
```bash
# 检查环境变量是否设置
echo $BAIDU_APP_ID
echo $BAIDU_API_KEY
echo $BAIDU_SECRET_KEY

# 如果为空，重新加载 .env
source .env

# 重启后端
pkill -f "python.*main.py"
python3 main.py &
```

### Q2: 识别失败，返回错误

**可能原因：**
1. 密钥错误 → 检查是否复制完整
2. 网络问题 → 测试能否访问百度服务器
3. 音频格式不支持 → 使用wav格式

### Q3: 录音没有声音

**解决方案：**
1. 检查浏览器麦克风权限
2. 检查系统麦克风设置
3. 尝试其他浏览器（推荐Chrome）

### Q4: 识别准确度不高

**优化建议：**
1. 说话清晰，语速适中
2. 避免环境噪音
3. 使用外置麦克风效果更好
4. 标准普通话识别效果最佳

## 📊 对比：Google vs 百度

| 特性     | Google语音   | 百度语音   |
| -------- | ------------ | ---------- |
| 网络要求 | 需要科学上网 | 国内直连 ✅ |
| 中文识别 | 良好         | 优秀 ✅     |
| 免费额度 | 无限制       | 5万次/天 ✅ |
| 响应速度 | 快           | 很快 ✅     |
| 配置难度 | 简单         | 需要注册   |

**推荐使用百度语音！** 🔥

## 🔐 安全提示

1. **不要泄露密钥**
   - .env 文件已加入 .gitignore
   - 不要将密钥提交到代码仓库

2. **定期检查使用量**
   - 登录百度智能云查看调用统计
   - 避免超出免费额度

3. **密钥管理**
   - 如果泄露，及时在控制台重置
   - 每个项目使用独立密钥

## 📞 需要帮助？

如果配置过程中遇到问题：

1. 查看后端日志：
   ```bash
   tail -f logs/server.log
   ```

2. 查看浏览器控制台（F12）

3. 检查百度智能云控制台：
   https://console.bce.baidu.com/ai/

---

**现在就去配置吧！5分钟后你就能用上稳定的语音识别功能！** 🚀
