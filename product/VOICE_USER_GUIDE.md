# 🎤 小乐AI语音交互使用指南

## 快速开始

### 1️⃣ 启用百度语音

1. 打开小乐AI主页：http://localhost:8000
2. 点击右上角 **⚙️ 设置**
3. 找到 **"语音交互设置"**
4. 选择 **"百度语音（推荐）"**
5. 点击保存

### 2️⃣ 使用语音输入

1. 在对话输入框右侧找到 **🎤 麦克风按钮**
2. **点击麦克风按钮**开始录音
3. **对着麦克风清晰说话**（建议说3-5秒）
4. **再次点击麦克风按钮**停止录音
5. 等待识别结果自动填入输入框

### 3️⃣ 使用语音播放

- 小乐的回复会自动语音播放（如果已启用百度TTS）
- 也可以关闭自动播放，手动点击播放按钮

---

## 💡 使用技巧

### 说话建议

✅ **推荐做法：**
- 吐字清晰，语速适中
- 使用标准普通话
- 每次说3-5秒以上
- 靠近麦克风（20-30cm）
- 安静的环境

❌ **避免：**
- 说话太快或太慢
- 背景噪音过大
- 离麦克风太远
- 说话时间太短（<2秒）
- 方言或口音过重

### 常见问题

**Q: 为什么识别结果是空的？**
- 检查麦克风音量是否足够大
- 确保说话时间足够长（至少3秒）
- 尝试更换麦克风或调整系统音量

**Q: 识别结果不准确？**
- 尝试更大声、更清晰地说话
- 减少背景噪音
- 使用标准普通话
- 说完整的句子而不是单个词

**Q: 麦克风按钮没反应？**
1. 检查浏览器是否允许麦克风权限
2. 刷新页面重试
3. 尝试使用 Chrome/Edge 浏览器
4. 查看浏览器控制台是否有错误

---

## 🔧 系统要求

### 浏览器兼容性
- ✅ Chrome 浏览器（推荐）
- ✅ Edge 浏览器
- ✅ Safari 浏览器
- ⚠️ Firefox（可能需要额外配置）

### 系统设置

**macOS：**
1. 系统偏好设置 → 声音 → 输入
2. 选择正确的麦克风
3. 调整输入音量到合适位置（建议50-80%）

**Windows：**
1. 设置 → 系统 → 声音 → 输入
2. 选择麦克风设备
3. 调整音量

---

## 🧪 测试工具

### 诊断页面

如果遇到问题，可以使用诊断页面测试：

**完整测试页面：**
http://localhost:8000/static/test_voice_button.html

**简单麦克风测试：**
http://localhost:8000/static/simple_mic_test.html

这些页面会显示：
- 麦克风权限状态
- 实时音量波形
- 音频增益信息
- 识别测试结果

---

## 📊 技术细节

### 音频规格
- **采样率**: 16000 Hz
- **编码格式**: PCM WAV
- **声道**: 单声道
- **位深度**: 16-bit

### 自动优化
- **音频增益**: 1.5x - 8x 自动调整
- **音频归一化**: 自动调整到最佳响度
- **降噪**: 浏览器原生处理

### API配置
当前使用的百度语音API：
- APP_ID: 120791683
- 识别引擎: 普通话（支持简单英文）
- 响应速度: 通常 < 2秒

---

## 📝 示例对话

**日常对话：**
- "你好，小乐"
- "今天天气怎么样"
- "帮我查询明天的日程"

**任务指令：**
- "提醒我下午三点开会"
- "搜索一下人工智能的最新新闻"
- "记录一条备忘录"

**信息查询：**
- "我儿子的课程表是什么"
- "上次我们聊了什么"
- "帮我总结一下今天的对话"

---

## 🆘 获取帮助

如果遇到问题：

1. **查看日志**：浏览器控制台（F12）
2. **检查服务状态**：http://localhost:8000/api/voice/status?detailed=true
3. **运行诊断工具**：使用上面提到的测试页面
4. **查看文档**：`docs/VOICE_QUICK_TEST.md` 有详细的故障排查指南

---

## 🎉 享受语音交互！

现在你可以：
- 🗣️ 通过语音与小乐对话
- 👂 听小乐的语音回复
- 💬 更自然地进行交互

祝你使用愉快！ 🚀
